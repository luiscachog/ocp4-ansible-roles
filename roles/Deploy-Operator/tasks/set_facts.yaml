---
 
- name: Get channel for operator from packagemanifest
  command: oc get packagemanifest {{ OPERATOR_NAME }} -n openshift-marketplace -o jsonpath='{.status.defaultChannel}' --kubeconfig {{ KUBECONFIG }}
  register: CHANNEL
      
- name: Get catalog source for operator from packagemanifest
  command: oc get packagemanifest {{ OPERATOR_NAME }} -n openshift-marketplace -o jsonpath='{.status.catalogSource}' --kubeconfig {{ KUBECONFIG }}
  register: CATALOG_SOURCE
      
- name: Check if Operator Group is needed
  command: oc get packagemanifest {{ OPERATOR_NAME }} -n openshift-marketplace  -o jsonpath='{.status.channels[].currentCSVDesc.installModes[3]}' --kubeconfig {{ KUBECONFIG }}
  register: INSTALL_MODE

